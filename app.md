# IoT気象データ送信アプリ 設計書

## 概要

本アプリケーションは、IoT端末から収集した気象データをサーバへ送信し、サーバがデータを保存・処理した後、レスポンスを返すシステムである。通信は Type 4（リクエスト）と Type 5（レスポンス）の1対1の方式で構成されている。

## 1. システム構成

+-------------+ Type 4 (Request) +-------------+
| IoT端末 | ----------------------------------> | サーバ |
| (センサ等) | | |
| | <---------------------------------- | |
+-------------+ Type 5 (Response) +-------------+

## 2. 通信仕様

| 項目       | 内容                     |
|------------|--------------------------|
| 通信形態   | クライアント-サーバ型（1対1） |
| リクエスト | Type 4（Type 3準拠）     |
| レスポンス | Type 5（Type 0準拠）     |
| 通信方向   | IoT端末 → サーバ（送信）<br>サーバ → IoT端末（応答） |

## 3. サーバ処理フロー

1. サーバがType 4リクエストパケットを受信。
2. チェックサム検証を行う。
3. 受信データを保存・処理。
4. Type 5レスポンスパケットを作成。
5. IoT端末へレスポンスを返却。

## 4. 実装詳細
1. IoT機器側で現在のResponseクラスのインスタンス作成・収集データを格納
2. to_byteメソッドを使用して、Type4のパケットとしてサーバへ送信。
3. サーバはリクエストを解釈し、データを処理・保存
4. サーバは応答パケットとしてRequestクラスのインスタンスを作成
5. Type 5のパケットとしてIoT機器へレスポンスを送信。